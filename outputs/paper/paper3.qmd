---
title: "Well-being of Individuals from the United States Global Social Survey are Affected by Finances, Relationships, and Health"
author: "Justin Abando, Jin Di Liu, Marcin Jaczynski"
thanks: "Code and data are available at: https://github.com/jackchinski/happiness_report"
date: "`r Sys.time()`"
date-format: "D MMMM YYYY"
abstract: "This paper discusses data taken from the 2021 US General Social Survey to analyze the relationship between finances and overall individual well being. Specifically, this paper looks to analyze and determine the relationships between financial well being and factors such as happiness, health, and marriage quality. The analysis provided a positive relationship between the two, however many confounding limitations still exist in regards to the possible interpretations of the data. Another survey is included at the end designed with the intention to better understand these variables with less limitation."
format: pdf
bibliography: references.bib
---

```{r}
#| include: false

knitr::opts_chunk$set(echo=TRUE)

###Workplace Setup###
library(tidyverse)
library(dplyr)
library(ggplot2)
library(gtsummary)
library(flextable)

quartoclean5 <- read_csv("../../inputs/data/clean5.csv")
mastercleaned <-read_csv("../../outputs/data/master_cleaned.csv")
happycleaned <- read_csv("../../outputs/data/happy_cleaned.csv")
finaltercleaned <-read_csv("../../outputs/data/finalter_cleaned.csv")
hapmarcleaned <- read_csv("../../outputs/data/hapmar_cleaned.csv")
healthcleaned <- read_csv("../../outputs/data/health_cleaned.csv")

```



# 1 Introduction {sec-introduction}



# 2 Data {sec-data}



## 2.1 Tools Used {sec-toolsused}



## 2.2 Survey Methodology {sec-surveymethods}



## 2.3 Survey Biases and Ethics {sec-surveyethics}



## 2.4 Data Collection {sec-datacollection}

This process requires access to an internet browser, a file compression software such as 7zip, and Microsoft Excel. In order to acquire the GSS 2021 data that we have extracted through legal means, please follow the precise steps outlined in our README.md file in our Github repository. 

In order to visualize the results of the GSS, the data was imported and analyzed using R [@rcoreteam2022]. The tidyverse package [@wickham2019] was used to load in the dplyr package to filter variables [@wickham2023], and ggplot2 to visualize the data in graphs [@wickham2016]. 

The data that was chosen to be analyzed from the GSS were variables that involved subjective opinions about the respondent’s well-being in tandem with socioeconomic variables that act as potential contributors to their state. These specific variables are:

HAPPY: Subjective opinion of the respondent’s happiness
HAPMAR: Subjective opinion of the respondents’ current happiness in their marriage (if they are married)
HEALTH: Subjective opinion of the respondent’s current health status
SATFIN: Financial satisfaction of the respondent
INCOME16: Total family income of the respondent, which includes: total income includes interest or dividends, rent, social security, other pensions, alimony or child support, unemployment compensation, public aid (welfare), armed forces or veteran's allotment. 
FINALTER: Subjective opinion of the respondent’s financial situation in the past few years since 2021.

Before we chose any of the other variables, we decided to first pick out INCOME16 and SATFIN. The reason for this is because we want to be able to gauge what range of income respondents would identify as a range where they would be financially satisfied. The reason for this is to quantify financial satisfaction on the basis of income, as this allows us to translate the sentiment of satisfaction into a tangible number. Similarly, happiness in a marriage context with HAPMAR was also chosen to be analyzed as social relationships play a large role in a person’s sense of belonging, and so we wanted to assess how living with a partner can affect their well-being in a measurable way. HEALTH is used to gauge how people feel about their general health condition, and can predict to a certain extent their well-being. These variables will be further explored in our data analysis (or can be demonstrated right now in a graph). Overall, our attention was turned to three specific factors: finances, relationships, and health. These variables were chosen to be analyzed as they represent core dimensions that are interconnected with well-being and how humans experience and feel about life [@rath2010]. Discussing these factors as they affect your well-being turns them into abstract concepts for people to visualize and describe to others, and so a subjective viewpoint was taken from respondents to gain an idea of how they affect them in a general context. 

## 2.5 Data Cleaning {sec-datacleaning}

In order to clean the data, we started by selecting all of the applicable columns to make two separate data frames. The first one consisted of SATFIN, which is financial satisfaction, and the INCOME16 column which is a family’s yearly income. While trying to visualize the data, we decided to make more general income ranges, instead of the twenty six that were provided in the original INCOME16 column. We settled on five income ranges. We did so, by creating an ifelse statement that would add an additional column “new_income_range” with our own set income ranges depending on the INCOME16 value. We then removed all invalid entries that consisted of either “incomplete”, “did not answer”, or “did not complete online” values. Similarly, we made another master_clean dataset, in which we selected the columns HAPPY, HAMPAR, HEALTH, FINALTER, SAFTIN, INCOME16, and GROUPED_INC. We then followed the same methodology of adding our own column for our custom income range, and removing all invalid entries from all of the invalid rows.


# 3 Results {sec-results}

In this section we cross-analyze each of the variables as outlined in {sec-datacollection} with themselves. This involves comparing the answers from two questions on the survey in order to draw potential trends between the respondents' feelings about the specific topic and their opinion of their well-being in relation to it.

\newpage

```{r}
#| label: table-satfinincome
#| tbl-cap: Table Visualization of financial satisfaction of respondents with respect to their relative income. There is a larger proportion of respondents that claim that they are not satisfied with their finances at lower income ranges. As the income range increases, more respondents proportionally express that they are either more of less satisfied, or are pretty well satisfied with their financial situation.
#| echo: false
#| message: false
table_satfinincome <- mastercleaned %>% 
  tbl_cross(row = satfin, col = new_income_range, label = list(new_income_range ~ "Income Ranges", satfin ~ "Finances"), percent = "column") %>% as_flex_table() %>% set_caption(caption = "Financial Satisfaction vs. Income Ranges")

table_satfinincome %>%

```




```{r}
#| label: fig-satfincome
#| fig-cap: Visualization of financial satisfaction of respondents with respect to their relative income. There is a larger proportion of respondents that claim that they are not satisfied with their finances at lower income ranges. As the income range increases, more respondents proportionally express that they are either more of less satisfied, or are pretty well satisfied with their financial situation.
#| echo: false
ggplot( 
  mastercleaned, aes(
    x = new_income_range, fill = satfin)) + 
  geom_bar(
    position = "stack") + #Creating a stacked bar plot
  theme_minimal() + #Using a simple theme
  theme(axis.text.x=element_text( #Adjusting horizontal axis text to be easily readable
    angle = 60, 
    hjust = 1)) + 
  labs(x = "Income Ranges", #Labeling the axes and fill section
       y = "Frequency",
       fill = "Financial Satisfaction")

```



\newpage


```{r}
#| label: table-happyandsatfin
#| fig-cap: something
#| echo: false
#| message: false
happycleaned %>% 
  tbl_cross(row = happy, col = satfin, label = list(satfin ~ "Financial Satisfactions", happy ~ "Happiness"), percent = "column")
```
```{r}
#| label: table-happyandincomes
#| fig-cap: something2
#| echo: false
#| message: false
happycleaned %>% 
  tbl_cross(row = happy, col = new_income_range, label = list(new_income_range ~ "Income Ranges", happy ~ "Happiness"), percent = "column")
```



\newpage



```{r}
#| label: fig-satfinhappy
#| fig-cap: something3
#| echo: false

ggplot(
  happycleaned, aes(
    x = satfin, fill = happy)) + 
  geom_bar(
    position = "stack") + #Creating a stacked bar plot
  theme_minimal() + #Using a simple theme
  theme(axis.text.x=element_text( #Adjusting horizontal axis text to be easily readable
    angle = 60, 
    hjust = 1)) + 
  labs(x = "Financial Satisfaction", #Labeling the axes and fill section
       y = "Frequency",
       fill = "Happiness Response")+
  scale_x_discrete(limit = c("Not satisfied at all", "More or less satisfied", "Pretty well satisfied"))

```



\newpage



```{r}
#| label: fig-happyincome
#| fig-cap: ???
#| echo: false

ggplot( 
  happycleaned, aes(
    x = new_income_range, fill = happy)) + 
  geom_bar(
    position = "stack") + #Creating a stacked bar plot
  theme_minimal() + #Using a simple theme
  theme(axis.text.x=element_text( #Adjusting horizontal axis text to be easily readable
    angle = 60, 
    hjust = 1)) + 
  labs(x = "Financial Satisfaction", #Labeling the axes and fill section
       y = "Frequency",
       fill = "Happiness Response")

```



\newpage



```{r}
#| label: table-hapmarsatfin
#| fig-cap: something2
#| echo: false
#| message: false
hapmarcleaned %>% 
  tbl_cross(row = hapmar, col = satfin, label = list(satfin ~ "Financial Satisfactions", hapmar ~ "Happiness of Marriage"), percent = "column")
```



```{r}
#| label: table-hapmarincome
#| fig-cap: something2
#| echo: false
#| message: false
hapmarcleaned %>% 
  tbl_cross(row = hapmar, col = new_income_range, label = list(new_income_range ~ "Income Ranges", hapmar ~ "Happiness of Marriage"), percent = "column")
```



\newpage



```{r}
#| label: fig-hapmarsatfin
#| fig-cap: something2
#| echo: false
ggplot( 
  hapmarcleaned, aes(
    x = satfin, fill = hapmar)) + 
  geom_bar(
    position = "stack") + #Creating a stacked bar plot
  theme_minimal() + #Using a simple theme
  theme(axis.text.x=element_text( #Adjusting horizontal axis text to be easily readable
    angle = 60, 
    hjust = 1)) + 
  labs(x = "Financial Satisfaction", #Labeling the axes and fill section
       y = "Frequency",
       fill = "Happiness of Marriage")+
  scale_x_discrete(limit = c("Not satisfied at all", "More or less satisfied", "Pretty well satisfied"))
```



\newpage



```{r}
#| label: fig-hapmarincome
#| fig-cap: ???
#| echo: false

ggplot( 
  hapmarcleaned, aes(
    x = new_income_range, fill = hapmar)) + 
  geom_bar(
    position = "stack") + #Creating a stacked bar plot
  theme_minimal() + #Using a simple theme
  theme(axis.text.x=element_text( #Adjusting horizontal axis text to be easily readable
    angle = 60, 
    hjust = 1)) + 
  labs(x = "Financial Satisfaction", #Labeling the axes and fill section
       y = "Frequency",
       fill = "Happiness of Marriage")
```



\newpage



```{r}
#| label: table-healthsatfin
#| fig-cap: something2
#| echo: false
#| message: false
healthcleaned %>% 
  tbl_cross(row = health, col = satfin, label = list(satfin ~ "Financial Satisfactions", health ~ "Quality of Health"), percent = "column")
```




```{r}
#| label: table-healthincome
#| fig-cap: something2
#| echo: false
#| message: false
healthcleaned %>% 
  tbl_cross(row = health, col = new_income_range, label = list(new_income_range ~ "Income Ranges", health ~ "Quality of Health"), percent = "column")
```



\newpage



```{r}
#| label: fig-healthsatfin
#| fig-cap: something2
#| echo: false
ggplot( 
  healthcleaned, aes(
    x = satfin, fill = health)) + 
  geom_bar(
    position = "stack") + #Creating a stacked bar plot
  theme_minimal() + #Using a simple theme
  theme(axis.text.x=element_text( #Adjusting horizontal axis text to be easily readable
    angle = 60, 
    hjust = 1)) + 
  labs(x = "Financial Satisfaction", #Labeling the axes and fill section
       y = "Frequency",
       fill = "Health")+
    scale_x_discrete(limit = c("Not satisfied at all", "More or less satisfied", "Pretty well satisfied"))
```



\newpage



```{r}
#| label: fig-healthincome
#| fig-cap: something2
#| echo: false
ggplot( 
  healthcleaned, aes(
    x = new_income_range, fill = health)) + 
  geom_bar(
    position = "stack") + #Creating a stacked bar plot
  theme_minimal() + #Using a simple theme
  theme(axis.text.x=element_text( #Adjusting horizontal axis text to be easily readable
    angle = 60, 
    hjust = 1)) + 
  labs(x = "Income Ranges", #Labeling the axes and fill section
       y = "Frequency",
       fill = "Health")
```



\newpage



```{r}
#| label: table-finaltsatfin
#| fig-cap: something2
#| echo: false
#| message: false
finaltercleaned %>% 
  tbl_cross(row = finalter, col = new_income_range, label = list(new_income_range ~ "Income Ranges", finalter ~ "Changes in Wealth"), percent = "column")
```




```{r}
#| label: table-finaltincome
#| fig-cap: something2
#| echo: false
#| message: false
finaltercleaned %>% 
  tbl_cross(row = finalter, col = new_income_range, label = list(new_income_range ~ "Income Ranges", finalter ~ "Changes in Wealth"), percent = "column")
```



\newpage




```{r}
#| label: fig-finaltsatfin
#| fig-cap: something2
#| echo: false
ggplot( 
  finaltercleaned, aes(
    x = satfin, fill = finalter)) + 
  geom_bar(
    position = "stack") + #Creating a stacked bar plot
  theme_minimal() + #Using a simple theme
  theme(axis.text.x=element_text( #Adjusting horizontal axis text to be easily readable
    angle = 60, 
    hjust = 1)) + 
  labs(x = "Financial Satisfaction", #Labeling the axes and fill section
       y = "Frequency",
       fill = "Changes in Wealth")+
    scale_x_discrete(limit = c("Not satisfied at all", "More or less satisfied", "Pretty well satisfied"))
```



\newpage



```{r}
#| label: fig-finaltincome
#| fig-cap: something2
#| echo: false
ggplot( 
  finaltercleaned, aes(
    x = new_income_range, fill = finalter)) + 
  geom_bar(
    position = "stack") + #Creating a stacked bar plot
  theme_minimal() + #Using a simple theme
  theme(axis.text.x=element_text( #Adjusting horizontal axis text to be easily readable
    angle = 60, 
    hjust = 1)) + 
  labs(x = "Income Ranges", #Labeling the axes and fill section
       y = "Frequency",
       fill = "Changes in Wealth")
```



# 4 Discussion {sec-discussion}



## 4.1 Limitations {sec-limitations}



# 5 Appendix {sec-appendix}


